name: Advanced Greetings

on: 
Â  pull_request_target:
Â  Â  types: [opened]
Â  issues:
Â  Â  types: [opened]

jobs:
Â  greeting:
Â  Â  runs-on: ubuntu-latest
Â  Â  permissions:
Â  Â  Â  issues: write
Â  Â  Â  pull-requests: write
Â  Â  steps:
Â  Â  - name: Check if First-Time Contributor
Â  Â  Â  id: first-time
Â  Â  Â  uses: actions/first-interaction@v1
Â  Â  Â  with:
Â  Â  Â  Â  repo-token: ${{ secrets.GITHUB_TOKEN }}
Â  Â  Â  Â  issue-message: ''
Â  Â  Â  Â  pr-message: ''

Â  Â  - name: Set Greeting Message
Â  Â  Â  id: set-message
Â  Â  Â  run: |
Â  Â  Â  Â  if [ "${{ github.event_name }}" = "issues" ]; then
Â  Â  Â  Â  Â  if [ "${{ steps.first-time.outputs.first-time-contributor }}" = "true" ]; then
Â  Â  Â  Â  Â  Â  echo "message=ðŸ‘‹ Welcome, first-time contributor! Thanks for raising an issue. Our team will review it shortly. Stay tuned! ðŸš€" >> $GITHUB_OUTPUT
Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  echo "message=ðŸ”„ Thanks for your continued contribution! We appreciate your help in improving the project. Our team will look into the issue soon!" >> $GITHUB_OUTPUT
Â  Â  Â  Â  Â  fi
Â  Â  Â  Â  elif [ "${{ github.event_name }}" = "pull_request_target" ]; then
Â  Â  Â  Â  Â  if [ "${{ steps.first-time.outputs.first-time-contributor }}" = "true" ]; then
Â  Â  Â  Â  Â  Â  echo "message=ðŸŽ‰ Welcome to your first pull request! We appreciate your contribution and will review it soon. Let's make this project even better together! ðŸŒŸ" >> $GITHUB_OUTPUT
Â  Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  echo "message=ðŸ‘ Great to see you again! Thanks for another awesome PR. We will review it as soon as possible. You're helping us improve with every contribution!" >> $GITHUB_OUTPUT
Â  Â  Â  Â  Â  fi
Â  Â  Â  Â  fi

Â  Â  - name: Post Greeting
Â  Â  Â  uses: actions/github-script@v6
Â  Â  Â  with:
Â  Â  Â  Â  github-token: ${{ secrets.GITHUB_TOKEN }}
Â  Â  Â  Â  script: |
Â  Â  Â  Â  Â  const message = "${{ steps.set-message.outputs.message }}";
Â  Â  Â  Â  Â  if (context.eventName === 'issues') {
Â  Â  Â  Â  Â  Â  github.rest.issues.createComment({
Â  Â  Â  Â  Â  Â  Â  issue_number: context.issue.number,
Â  Â  Â  Â  Â  Â  Â  owner: context.repo.owner,
Â  Â  Â  Â  Â  Â  Â  repo: context.repo.repo,
Â  Â  Â  Â  Â  Â  Â  body: message
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  } else if (context.eventName === 'pull_request_target') {
Â  Â  Â  Â  Â  Â  github.rest.pulls.createReview({
Â  Â  Â  Â  Â  Â  Â  pull_number: context.issue.number,
Â  Â  Â  Â  Â  Â  Â  owner: context.repo.owner,
Â  Â  Â  Â  Â  Â  Â  repo: context.repo.repo,
Â  Â  Â  Â  Â  Â  Â  body: message,
Â  Â  Â  Â  Â  Â  Â  event: 'COMMENT'
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  
Â  Â  - name: Post Maintainer Welcome (Optional)
Â  Â  Â  if: github.actor == 'MaintainerUsername'
Â  Â  Â  run: |
Â  Â  Â  Â  echo "message=ðŸ™Œ Welcome back, maintainer! Thanks for reviewing and supporting this project!" >> $GITHUB_OUTPUT